<script>
    // Event listener for form submission
    document.getElementById("registration-form").addEventListener("submit", function(event) {
        event.preventDefault(); // Prevent the default form submission
        
        // Get form values
        let name = document.getElementById("name").value;
        let day = document.getElementById("day").value;
        let month = document.getElementById("month").value;
        let year = document.getElementById("year").value;
        let email = document.getElementById("email").value;
        let noEmail = document.getElementById("no-email").checked;

        // Initialize an array to hold error messages
        let errorMessages = [];

        // Validate Name
        if (!name.trim()) {
            errorMessages.push("*Please insert a name.");
        }

        // Validate Birthday (DD, MM, YYYY format)
        if (!isValidBirthday(day, month, year)) {
            errorMessages.push("*Please insert a valid birthday.");
        }

        // Validate Email (if no-email checkbox is not checked)
        if (!noEmail && !validateEmail(email)) {
            errorMessages.push("*Please insert a valid email address.");
        }

        // If there are errors, display them in an alert
        if (errorMessages.length > 0) {
            alert(errorMessages.join("\n")); // Show all error messages in a single alert
            return; // Stop execution if there are errors
        }

        // Save data in sessionStorage to pass it to page3.html
        sessionStorage.setItem("name", name);
        sessionStorage.setItem("birthday", `${day}/${month}/${year}`);
        sessionStorage.setItem("email", noEmail ? "No email provided" : email);

        // Redirect to page 3
        window.location.href = "page3.html";
    });

    // Function to validate email
    function validateEmail(email) {
        let emailRegex = /^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,6}$/;
        return emailRegex.test(email);
    }

    // Function to validate birthday
    function isValidBirthday(day, month, year) {
        if (!day || !month || !year || isNaN(day) || isNaN(month) || isNaN(year)) {
            return false; // Not a number
        }
        day = parseInt(day);
        month = parseInt(month);
        year = parseInt(year);
        
        if (day < 1 || day > 31 || month < 1 || month > 12 || year < 1900 || year > new Date().getFullYear()) {
            return false; // Out of range
        }

        // Check for valid days in month
        const daysInMonth = [31, (isLeapYear(year) ? 29 : 28), 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];
        return day <= daysInMonth[month - 1];
    }

    // Function to check if a year is a leap year
    function isLeapYear(year) {
        return (year % 4 === 0 && year % 100 !== 0) || (year % 400 === 0);
    }
</script>